<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pie Chart</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    .tooltip {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 5px;
      border: 1px solid #ccc;
      pointer-events: none;
      border-radius: 3px;
    }
  </style>
</head>
<body>
  <svg width="400" height="400"></svg>
  <div class="tooltip" style="opacity:0;"></div>
  <script>
    const data = [
      { name: "Rolled oats", amount: 100, color: "#B58863" },
      { name: "Mixed berries", amount: 200, color: "#6A1B9A" },
      { name: "Almonds", amount: 20, color: "#9B7653" },
      { name: "Whole milk", amount: 200, color: "#FEFEF7" },
      { name: "White bread", amount: 64, color: "#FDFD96" },
      { name: "Canned tuna", amount: 150, color: "#BEBAA7" },
      { name: "Mayonnaise", amount: 30, color: "#FFFDD0" },
      { name: "Lettuce", amount: 50, color: "#1B5E20" },
      { name: "Tomato", amount: 50, color: "#FF5252" },
      { name: "Chicken breast", amount: 200, color: "#FFEBEE" },
      { name: "Cooked brown rice", amount: 200, color: "#6D4C41" },
      { name: "Broccoli", amount: 150, color: "#2E7D32" },
      { name: "Bell peppers", amount: 100, color: "#FFA726" },
      { name: "Olive oil", amount: 14, color: "#3E2723" },
      { name: "Greek yogurt", amount: 200, color: "#F5F5F5" },
      { name: "Honey", amount: 21, color: "#FFCA28" },
    ];

    const width = 400;
    const height = 400;
    const radius = Math.min(width, height) / 2;

    const svg = d3.select("svg")
      .attr("width", width)
      .attr("height", height)
      .append("g")
      .attr("transform", `translate(${width / 2}, ${height / 2})`);

    const pie = d3.pie()
      .value(d => d.amount)
      .sort(null);

    const arc = d3.arc()
      .innerRadius(0)
      .outerRadius(radius);

    const tooltip = d3.select(".tooltip");

    const showTooltip = (event, d) => {
      tooltip.style("opacity", 1)
        .text(d.data.name)
        .style("left", (event.pageX + 15) + "px")
        .style("top", (event.pageY - 15) + "px");
    };

    const hideTooltip = () => {
      tooltip.style("opacity", 0);
    };

    const path = svg.selectAll("path")
      .data(pie(data))
      .enter()
      .append("path")
      .attr("d", arc)
      .attr("fill", d => d.data.color)
      .on("mouseover", showTooltip)
      .on("mousemove", showTooltip)
      .on("mouseout", hideTooltip);

    </script>
</body>
</html>
